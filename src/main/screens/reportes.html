<div id="reportes" class="content-area">
  <div>
    <div class="card">
      <button id="reporte-button-create" class="btn-primary">
        Crear Reporte Técnico
      </button>
      <div id="form-container-reporte">
        <form id="reporteForm">
          <!-- Datos Generales -->
          <div class="form-section">
            <h2 class="section-title"> Datos Generales</h2>
            <div class="row">
              <div class="form-group">
                <label for="orden_id">Seleccionar Orden *</label>
                <select id="orden_id" name="orden_id" required>
                  <option value="">Seleccione una orden...</option>
                </select>
              </div>
              <div class="form-group">
                <label for="tecnico">Técnico Responsable *</label>
                <input type="text" id="tecnico" name="tecnico" required placeholder="Nombre del técnico" readonly>
              </div>
            </div>
            <div class="form-group">
              <label for="equipo">Equipo/Dispositivo *</label>
              <input type="text" id="equipo" name="equipo" required placeholder="Descripción del equipo" readonly>
            </div>
          </div>

          <!-- Trabajos Realizados -->
          <div class="form-section">
            <h2 class="section-title">
              Trabajos Realizados
              <button type="button" class="add-btn" onclick="agregarTrabajo()">+ Agregar Trabajo</button>
            </h2>
            <div id="trabajos-container">
              <div class="empty-container">
                No hay trabajos agregados. Haga clic en "+ Agregar Trabajo" para comenzar.
              </div>
            </div>
          </div>

          <!-- Repuestos Utilizados -->
          <div class="form-section">
            <h2 class="section-title">
              Repuestos Utilizados
              <button type="button" class="add-btn" onclick="agregarRepuesto()">+ Agregar Repuesto</button>
            </h2>
            <div id="repuestos-container">
              <div class="empty-container">
                No hay repuestos agregados. Haga clic en "+ Agregar Repuesto" para comenzar.
              </div>
            </div>
          </div>

          <!-- Observaciones -->
          <div class="form-section">
            <h2 class="section-title"> Observaciones</h2>
            <div class="form-group">
              <label for="observaciones">Notas y Recomendaciones</label>
              <textarea id="observaciones" name="observaciones" rows="6"
                placeholder="Las observaciones se cargarán automáticamente al seleccionar una orden..."></textarea>
            </div>
          </div>

          <!-- Totales -->
          <div class="totals-section">
            <div class="total-row">
              <span> Total Trabajos:</span>
              <span id="total-trabajos">$0.00</span>
            </div>
            <div class="total-row">
              <span> Total Repuestos:</span>
              <span id="total-repuestos">$0.00</span>
            </div>
            <div class="total-row grand-total">
              <span> TOTAL GENERAL:</span>
              <span id="total-general">$0.00</span>
            </div>
          </div>

          <button type="submit" class="submit-btn">
            Generar Reporte
          </button>

          <div class="form-footer">
            <p>El reporte será guardado en el sistema y asociado a la orden correspondiente.</p>
          </div>
        </form>
      </div>
      <div id="reportes-list-section" style="margin-top: 20px;">
        <h2 style="margin-bottom: 15px; color: #2d3748;">Reportes Registrados</h2>

        <!-- Filtros de busqueda -->
        <div class="filtros-container">
          <div class="filtro-group">
            <label for="filtro-cliente">Cliente</label>
            <input type="text" id="filtro-cliente" placeholder="Buscar por nombre..." oninput="filtrarReportes()">
          </div>
          <div class="filtro-group">
            <label for="filtro-orden">Codigo Orden</label>
            <input type="text" id="filtro-orden" placeholder="Ej: ORD-2025" oninput="filtrarReportes()">
          </div>
          <div class="filtro-group">
            <label for="filtro-fecha-desde">Desde</label>
            <input type="date" id="filtro-fecha-desde" onchange="filtrarReportes()">
          </div>
          <div class="filtro-group">
            <label for="filtro-fecha-hasta">Hasta</label>
            <input type="date" id="filtro-fecha-hasta" onchange="filtrarReportes()">
          </div>
          <div class="filtro-group filtro-actions">
            <button type="button" class="btn-limpiar-filtros" onclick="limpiarFiltros()">
              Limpiar Filtros
            </button>
          </div>
        </div>

        <div id="reportes-containers">
          <div class="empty-container">
            No hay reportes registrados.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para ver detalles del reporte -->
<div id="reporte-detail-modal" class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h2 id="modal-title">Detalles del Reporte</h2>
      <button class="modal-close-btn" onclick="cerrarModalReporte()">&times;</button>
    </div>
    <div class="modal-body" id="modal-body-content">
      <!-- Contenido dinámico del reporte -->
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="cerrarModalReporte()">Cerrar</button>
      <button class="btn-download" onclick="descargarPDF()">
        Descargar PDF
      </button>
      <button class="btn-print" onclick="imprimirReporte()">
        Imprimir
      </button>
    </div>
  </div>
</div>

<script>
  // Script para remover el empty-container cuando se agregan items
  function removeEmptyState(containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;

    const emptyContainer = container.querySelector('.empty-container');
    if (emptyContainer && container.children.length > 1) {
      emptyContainer.remove();
    }
  }
  // Observar cambios en los contenedores

</script>